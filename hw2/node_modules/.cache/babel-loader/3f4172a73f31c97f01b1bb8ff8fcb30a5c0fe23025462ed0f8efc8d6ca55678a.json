{"ast":null,"code":"var _ViewportManager;\n/**\n * ViewportManager - 自動管理視窗縮放\n * 確保遊戲在所有螢幕尺寸下都能完整顯示\n */\n\nclass ViewportManager {\n  constructor() {\n    this.currentScale = 1;\n    this.container = null;\n    this.init();\n  }\n  static getInstance() {\n    if (!ViewportManager.instance) {\n      ViewportManager.instance = new ViewportManager();\n    }\n    return ViewportManager.instance;\n  }\n  init() {\n    // 監聽視窗大小變化\n    window.addEventListener('resize', () => this.updateScale());\n    window.addEventListener('orientationchange', () => {\n      setTimeout(() => this.updateScale(), 100);\n    });\n\n    // 初始縮放\n    this.updateScale();\n  }\n  setContainer(container) {\n    this.container = container;\n    this.updateScale();\n  }\n  updateScale() {\n    if (!this.container) return;\n    const screenWidth = window.innerWidth;\n    const screenHeight = window.innerHeight;\n\n    // 基準尺寸 (1920x1080)\n    const baseWidth = 1920;\n    const baseHeight = 1080;\n\n    // 計算縮放比例\n    const scaleX = screenWidth / baseWidth;\n    const scaleY = screenHeight / baseHeight;\n\n    // 使用較小的縮放比例確保內容完全可見\n    let scale = Math.min(scaleX, scaleY);\n\n    // 限制縮放範圍\n    scale = Math.max(0.3, Math.min(1, scale));\n\n    // 應用縮放\n    this.container.style.transform = `scale(${scale})`;\n    this.container.style.transformOrigin = 'top left';\n\n    // 調整容器大小以適應縮放\n    this.container.style.width = `${baseWidth}px`;\n    this.container.style.height = `${baseHeight}px`;\n    this.currentScale = scale;\n    console.log(`ViewportManager: Screen ${screenWidth}x${screenHeight}, Scale: ${scale.toFixed(2)}`);\n  }\n  getCurrentScale() {\n    return this.currentScale;\n  }\n  getScreenInfo() {\n    return {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      scale: this.currentScale\n    };\n  }\n}\n_ViewportManager = ViewportManager;\nViewportManager.instance = void 0;\nexport default ViewportManager;","map":{"version":3,"names":["ViewportManager","constructor","currentScale","container","init","getInstance","instance","window","addEventListener","updateScale","setTimeout","setContainer","screenWidth","innerWidth","screenHeight","innerHeight","baseWidth","baseHeight","scaleX","scaleY","scale","Math","min","max","style","transform","transformOrigin","width","height","console","log","toFixed","getCurrentScale","getScreenInfo","_ViewportManager"],"sources":["/Users/arthurlin/Desktop/網服/wp1141/hw2/src/utils/ViewportManager.ts"],"sourcesContent":["/**\n * ViewportManager - 自動管理視窗縮放\n * 確保遊戲在所有螢幕尺寸下都能完整顯示\n */\n\nclass ViewportManager {\n  private static instance: ViewportManager;\n  private currentScale: number = 1;\n  private container: HTMLElement | null = null;\n\n  private constructor() {\n    this.init();\n  }\n\n  public static getInstance(): ViewportManager {\n    if (!ViewportManager.instance) {\n      ViewportManager.instance = new ViewportManager();\n    }\n    return ViewportManager.instance;\n  }\n\n  private init(): void {\n    // 監聽視窗大小變化\n    window.addEventListener('resize', () => this.updateScale());\n    window.addEventListener('orientationchange', () => {\n      setTimeout(() => this.updateScale(), 100);\n    });\n\n    // 初始縮放\n    this.updateScale();\n  }\n\n  public setContainer(container: HTMLElement): void {\n    this.container = container;\n    this.updateScale();\n  }\n\n  private updateScale(): void {\n    if (!this.container) return;\n\n    const screenWidth = window.innerWidth;\n    const screenHeight = window.innerHeight;\n    \n    // 基準尺寸 (1920x1080)\n    const baseWidth = 1920;\n    const baseHeight = 1080;\n    \n    // 計算縮放比例\n    const scaleX = screenWidth / baseWidth;\n    const scaleY = screenHeight / baseHeight;\n    \n    // 使用較小的縮放比例確保內容完全可見\n    let scale = Math.min(scaleX, scaleY);\n    \n    // 限制縮放範圍\n    scale = Math.max(0.3, Math.min(1, scale));\n    \n    // 應用縮放\n    this.container.style.transform = `scale(${scale})`;\n    this.container.style.transformOrigin = 'top left';\n    \n    // 調整容器大小以適應縮放\n    this.container.style.width = `${baseWidth}px`;\n    this.container.style.height = `${baseHeight}px`;\n    \n    this.currentScale = scale;\n    \n    console.log(`ViewportManager: Screen ${screenWidth}x${screenHeight}, Scale: ${scale.toFixed(2)}`);\n  }\n\n  public getCurrentScale(): number {\n    return this.currentScale;\n  }\n\n  public getScreenInfo(): { width: number; height: number; scale: number } {\n    return {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      scale: this.currentScale\n    };\n  }\n}\n\nexport default ViewportManager;\n"],"mappings":";AAAA;AACA;AACA;AACA;;AAEA,MAAMA,eAAe,CAAC;EAKZC,WAAWA,CAAA,EAAG;IAAA,KAHdC,YAAY,GAAW,CAAC;IAAA,KACxBC,SAAS,GAAuB,IAAI;IAG1C,IAAI,CAACC,IAAI,CAAC,CAAC;EACb;EAEA,OAAcC,WAAWA,CAAA,EAAoB;IAC3C,IAAI,CAACL,eAAe,CAACM,QAAQ,EAAE;MAC7BN,eAAe,CAACM,QAAQ,GAAG,IAAIN,eAAe,CAAC,CAAC;IAClD;IACA,OAAOA,eAAe,CAACM,QAAQ;EACjC;EAEQF,IAAIA,CAAA,EAAS;IACnB;IACAG,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,IAAI,CAACC,WAAW,CAAC,CAAC,CAAC;IAC3DF,MAAM,CAACC,gBAAgB,CAAC,mBAAmB,EAAE,MAAM;MACjDE,UAAU,CAAC,MAAM,IAAI,CAACD,WAAW,CAAC,CAAC,EAAE,GAAG,CAAC;IAC3C,CAAC,CAAC;;IAEF;IACA,IAAI,CAACA,WAAW,CAAC,CAAC;EACpB;EAEOE,YAAYA,CAACR,SAAsB,EAAQ;IAChD,IAAI,CAACA,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACM,WAAW,CAAC,CAAC;EACpB;EAEQA,WAAWA,CAAA,EAAS;IAC1B,IAAI,CAAC,IAAI,CAACN,SAAS,EAAE;IAErB,MAAMS,WAAW,GAAGL,MAAM,CAACM,UAAU;IACrC,MAAMC,YAAY,GAAGP,MAAM,CAACQ,WAAW;;IAEvC;IACA,MAAMC,SAAS,GAAG,IAAI;IACtB,MAAMC,UAAU,GAAG,IAAI;;IAEvB;IACA,MAAMC,MAAM,GAAGN,WAAW,GAAGI,SAAS;IACtC,MAAMG,MAAM,GAAGL,YAAY,GAAGG,UAAU;;IAExC;IACA,IAAIG,KAAK,GAAGC,IAAI,CAACC,GAAG,CAACJ,MAAM,EAAEC,MAAM,CAAC;;IAEpC;IACAC,KAAK,GAAGC,IAAI,CAACE,GAAG,CAAC,GAAG,EAAEF,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEF,KAAK,CAAC,CAAC;;IAEzC;IACA,IAAI,CAACjB,SAAS,CAACqB,KAAK,CAACC,SAAS,GAAG,SAASL,KAAK,GAAG;IAClD,IAAI,CAACjB,SAAS,CAACqB,KAAK,CAACE,eAAe,GAAG,UAAU;;IAEjD;IACA,IAAI,CAACvB,SAAS,CAACqB,KAAK,CAACG,KAAK,GAAG,GAAGX,SAAS,IAAI;IAC7C,IAAI,CAACb,SAAS,CAACqB,KAAK,CAACI,MAAM,GAAG,GAAGX,UAAU,IAAI;IAE/C,IAAI,CAACf,YAAY,GAAGkB,KAAK;IAEzBS,OAAO,CAACC,GAAG,CAAC,2BAA2BlB,WAAW,IAAIE,YAAY,YAAYM,KAAK,CAACW,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;EACnG;EAEOC,eAAeA,CAAA,EAAW;IAC/B,OAAO,IAAI,CAAC9B,YAAY;EAC1B;EAEO+B,aAAaA,CAAA,EAAqD;IACvE,OAAO;MACLN,KAAK,EAAEpB,MAAM,CAACM,UAAU;MACxBe,MAAM,EAAErB,MAAM,CAACQ,WAAW;MAC1BK,KAAK,EAAE,IAAI,CAAClB;IACd,CAAC;EACH;AACF;AAACgC,gBAAA,GA5EKlC,eAAe;AAAfA,eAAe,CACJM,QAAQ;AA6EzB,eAAeN,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
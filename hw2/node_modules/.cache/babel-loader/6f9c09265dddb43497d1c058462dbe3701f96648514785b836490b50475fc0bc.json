{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./VictoryEffect.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VictoryEffect=_ref=>{let{stars,isAllComplete=false,totalStars=0,onComplete}=_ref;const[showEffect,setShowEffect]=useState(true);const[fadeOut,setFadeOut]=useState(false);const[particles,setParticles]=useState([]);useEffect(()=>{// ÁîüÊàêÁ≤íÂ≠êÊïàÊûú\nconst particleCount=isAllComplete?50:stars*15;const newParticles=Array.from({length:particleCount},(_,i)=>({id:i,x:Math.random()*100,y:Math.random()*100,color:getParticleColor(stars,isAllComplete),delay:Math.random()*0.5}));setParticles(newParticles);// 3ÁßíÂæåÈñãÂßãÊ∑°Âá∫‰∏¶Ê∫ñÂÇôÁµêÊùü\nconst timer=setTimeout(()=>{setFadeOut(true);// Á≠âÂæÖÊ∑°Âá∫ÂãïÁï´ÂÆåÊàêÂæåÂÜçË™øÁî®ÂõûË™øÂíåÈö±ËóèÁµÑ‰ª∂\nsetTimeout(()=>{setShowEffect(false);onComplete();},300);// CSS Ê∑°Âá∫ÂãïÁï´ÊôÇÈñì\n},3000);return()=>clearTimeout(timer);},[stars,isAllComplete,onComplete]);const getParticleColor=(stars,isAllComplete)=>{if(isAllComplete){const colors=['#FFD700','#FF6B6B','#4ECDC4','#45B7D1','#96CEB4','#FFEAA7'];return colors[Math.floor(Math.random()*colors.length)];}switch(stars){case 1:return'#32CD32';// Á∂†Ëâ≤\ncase 2:return'#FFD700';// ÈáëËâ≤\ncase 3:return'#FF6B6B';// Á¥ÖËâ≤\ndefault:return'#87CEEB';}};const getEffectTitle=()=>{if(isAllComplete){if(totalStars>=21)return'ÂÆåÁæéÂ§ßÂ∏´ÔºÅ';// 7Èóú * 3Êòü\nif(totalStars>=14)return'ÂÑ™ÁßÄÂÜíÈö™ÂÆ∂ÔºÅ';// 7Èóú * 2ÊòüÂπ≥Âùá\nreturn'ÂãáÊï¢Êé¢Èö™ËÄÖÔºÅ';}switch(stars){case 1:return'‰∏çÈåØÁöÑÂòóË©¶ÔºÅ';case 2:return'ÂÅöÂæóÂæàÂ•ΩÔºÅ';case 3:return'ÂÆåÁæéÈÄöÈóúÔºÅ';default:return'ÊÅ≠ÂñúÈÅéÈóúÔºÅ';}};const getEffectSubtitle=()=>{if(isAllComplete){return\"\\u7E3D\\u5171\\u7372\\u5F97 \".concat(totalStars,\" \\u9846\\u661F\\u661F\\uFF01\");}return\"\\u7372\\u5F97 \".concat(stars,\" \\u9846\\u661F\\u661F\\uFF01\");};if(!showEffect)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"victory-effect \".concat(isAllComplete?'all-complete':\"stars-\".concat(stars),\" \").concat(fadeOut?'fade-out':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"victory-backdrop\"}),/*#__PURE__*/_jsx(\"div\",{className:\"particles-container\",children:particles.map(particle=>/*#__PURE__*/_jsx(\"div\",{className:\"particle\",style:{left:\"\".concat(particle.x,\"%\"),top:\"\".concat(particle.y,\"%\"),backgroundColor:particle.color,animationDelay:\"\".concat(particle.delay,\"s\")}},particle.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"victory-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stars-display\",children:isAllComplete?/*#__PURE__*/_jsx(\"div\",{className:\"trophy-icon\",children:\"\\uD83C\\uDFC6\"}):Array.from({length:3},(_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"star \".concat(i<stars?'filled':'empty'),style:{animationDelay:\"\".concat(i*0.2,\"s\")},children:\"\\u2605\"},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"victory-text\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"victory-title\",children:getEffectTitle()}),/*#__PURE__*/_jsx(\"p\",{className:\"victory-subtitle\",children:getEffectSubtitle()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"victory-rings\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ring ring-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ring ring-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ring ring-3\"})]})]}),isAllComplete&&/*#__PURE__*/_jsx(\"div\",{className:\"confetti-container\",children:Array.from({length:20},(_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"confetti\",style:{left:\"\".concat(Math.random()*100,\"%\"),animationDelay:\"\".concat(Math.random()*2,\"s\"),backgroundColor:getParticleColor(0,true)}},i))})]});};export default VictoryEffect;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","VictoryEffect","_ref","stars","isAllComplete","totalStars","onComplete","showEffect","setShowEffect","fadeOut","setFadeOut","particles","setParticles","particleCount","newParticles","Array","from","length","_","i","id","x","Math","random","y","color","getParticleColor","delay","timer","setTimeout","clearTimeout","colors","floor","getEffectTitle","getEffectSubtitle","concat","className","children","map","particle","style","left","top","backgroundColor","animationDelay"],"sources":["/Users/arthurlin/Desktop/Á∂≤Êúç/wp1141/hw2/src/components/VictoryEffect.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './VictoryEffect.css';\n\ninterface VictoryEffectProps {\n  stars: number;\n  isAllComplete?: boolean;\n  totalStars?: number;\n  onComplete: () => void;\n}\n\nconst VictoryEffect: React.FC<VictoryEffectProps> = ({ \n  stars, \n  isAllComplete = false, \n  totalStars = 0, \n  onComplete \n}) => {\n  const [showEffect, setShowEffect] = useState(true);\n  const [fadeOut, setFadeOut] = useState(false);\n  const [particles, setParticles] = useState<Array<{ id: number; x: number; y: number; color: string; delay: number }>>([]);\n\n  useEffect(() => {\n    // ÁîüÊàêÁ≤íÂ≠êÊïàÊûú\n    const particleCount = isAllComplete ? 50 : stars * 15;\n    const newParticles = Array.from({ length: particleCount }, (_, i) => ({\n      id: i,\n      x: Math.random() * 100,\n      y: Math.random() * 100,\n      color: getParticleColor(stars, isAllComplete),\n      delay: Math.random() * 0.5\n    }));\n    setParticles(newParticles);\n\n    // 3ÁßíÂæåÈñãÂßãÊ∑°Âá∫‰∏¶Ê∫ñÂÇôÁµêÊùü\n    const timer = setTimeout(() => {\n      setFadeOut(true);\n      // Á≠âÂæÖÊ∑°Âá∫ÂãïÁï´ÂÆåÊàêÂæåÂÜçË™øÁî®ÂõûË™øÂíåÈö±ËóèÁµÑ‰ª∂\n      setTimeout(() => {\n        setShowEffect(false);\n        onComplete();\n      }, 300); // CSS Ê∑°Âá∫ÂãïÁï´ÊôÇÈñì\n    }, 3000);\n\n    return () => clearTimeout(timer);\n  }, [stars, isAllComplete, onComplete]);\n\n  const getParticleColor = (stars: number, isAllComplete: boolean) => {\n    if (isAllComplete) {\n      const colors = ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7'];\n      return colors[Math.floor(Math.random() * colors.length)];\n    }\n    \n    switch (stars) {\n      case 1: return '#32CD32'; // Á∂†Ëâ≤\n      case 2: return '#FFD700'; // ÈáëËâ≤\n      case 3: return '#FF6B6B'; // Á¥ÖËâ≤\n      default: return '#87CEEB';\n    }\n  };\n\n  const getEffectTitle = () => {\n    if (isAllComplete) {\n      if (totalStars >= 21) return 'ÂÆåÁæéÂ§ßÂ∏´ÔºÅ'; // 7Èóú * 3Êòü\n      if (totalStars >= 14) return 'ÂÑ™ÁßÄÂÜíÈö™ÂÆ∂ÔºÅ'; // 7Èóú * 2ÊòüÂπ≥Âùá\n      return 'ÂãáÊï¢Êé¢Èö™ËÄÖÔºÅ';\n    }\n    \n    switch (stars) {\n      case 1: return '‰∏çÈåØÁöÑÂòóË©¶ÔºÅ';\n      case 2: return 'ÂÅöÂæóÂæàÂ•ΩÔºÅ';\n      case 3: return 'ÂÆåÁæéÈÄöÈóúÔºÅ';\n      default: return 'ÊÅ≠ÂñúÈÅéÈóúÔºÅ';\n    }\n  };\n\n  const getEffectSubtitle = () => {\n    if (isAllComplete) {\n      return `Á∏ΩÂÖ±Áç≤Âæó ${totalStars} È°ÜÊòüÊòüÔºÅ`;\n    }\n    \n    return `Áç≤Âæó ${stars} È°ÜÊòüÊòüÔºÅ`;\n  };\n\n  if (!showEffect) return null;\n\n  return (\n    <div className={`victory-effect ${isAllComplete ? 'all-complete' : `stars-${stars}`} ${fadeOut ? 'fade-out' : ''}`}>\n      {/* ËÉåÊôØÈÅÆÁΩ© */}\n      <div className=\"victory-backdrop\" />\n      \n      {/* Á≤íÂ≠êÊïàÊûú */}\n      <div className=\"particles-container\">\n        {particles.map(particle => (\n          <div\n            key={particle.id}\n            className=\"particle\"\n            style={{\n              left: `${particle.x}%`,\n              top: `${particle.y}%`,\n              backgroundColor: particle.color,\n              animationDelay: `${particle.delay}s`\n            }}\n          />\n        ))}\n      </div>\n\n      {/* ‰∏ªË¶ÅÂÖßÂÆπ */}\n      <div className=\"victory-content\">\n        {/* ÊòüÊòüÈ°ØÁ§∫ */}\n        <div className=\"stars-display\">\n          {isAllComplete ? (\n            <div className=\"trophy-icon\">üèÜ</div>\n          ) : (\n            Array.from({ length: 3 }, (_, i) => (\n              <div\n                key={i}\n                className={`star ${i < stars ? 'filled' : 'empty'}`}\n                style={{ animationDelay: `${i * 0.2}s` }}\n              >\n                ‚òÖ\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* ÊñáÂ≠óÂÖßÂÆπ */}\n        <div className=\"victory-text\">\n          <h1 className=\"victory-title\">{getEffectTitle()}</h1>\n          <p className=\"victory-subtitle\">{getEffectSubtitle()}</p>\n        </div>\n\n        {/* È°çÂ§ñÁöÑË¶ñË¶∫ÊïàÊûú */}\n        <div className=\"victory-rings\">\n          <div className=\"ring ring-1\" />\n          <div className=\"ring ring-2\" />\n          <div className=\"ring ring-3\" />\n        </div>\n      </div>\n\n      {/* ÂΩ©Â∏∂ÊïàÊûúÔºàÂÉÖÂÖ®ÈóúÂç°ÂÆåÊàêÊôÇÈ°ØÁ§∫Ôºâ */}\n      {isAllComplete && (\n        <div className=\"confetti-container\">\n          {Array.from({ length: 20 }, (_, i) => (\n            <div\n              key={i}\n              className=\"confetti\"\n              style={{\n                left: `${Math.random() * 100}%`,\n                animationDelay: `${Math.random() * 2}s`,\n                backgroundColor: getParticleColor(0, true)\n              }}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VictoryEffect;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React from'react';import'./GameBoard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GameBoard=_ref=>{let{gameState,onCellClick}=_ref;const{currentLevel,blockPositions,coveredCells}=gameState;const{gridSize,obstacles}=currentLevel;const[rows,cols]=gridSize;const renderCell=(row,col)=>{const position={row,col};const positionKey=\"\".concat(row,\",\").concat(col);// 檢查是否為障礙物\nconst isObstacle=obstacles.some(obs=>obs.row===row&&obs.col===col);// 檢查是否有方塊\nconst blockIndex=blockPositions.findIndex(block=>block.row===row&&block.col===col);// 檢查是否已覆蓋\nconst isCovered=coveredCells.has(positionKey);let cellClass='game-cell';if(isObstacle){cellClass+=' obstacle';}else if(blockIndex!==-1){cellClass+=\" block block-\".concat(blockIndex);}else if(isCovered){cellClass+=' covered';}else{cellClass+=' empty';}return/*#__PURE__*/_jsxs(\"div\",{className:cellClass,onClick:()=>onCellClick===null||onCellClick===void 0?void 0:onCellClick(position),\"data-row\":row,\"data-col\":col,children:[blockIndex!==-1&&/*#__PURE__*/_jsx(\"div\",{className:\"block-content\",children:/*#__PURE__*/_jsx(\"span\",{className:\"block-number\",children:blockIndex+1})}),isCovered&&!isObstacle&&blockIndex===-1&&/*#__PURE__*/_jsx(\"div\",{className:\"covered-indicator\",children:\"\\u2713\"})]},\"\".concat(row,\"-\").concat(col));};return/*#__PURE__*/_jsx(\"div\",{className:\"game-board\",style:{gridTemplateColumns:\"repeat(\".concat(cols,\", 1fr)\"),gridTemplateRows:\"repeat(\".concat(rows,\", 1fr)\")},children:Array.from({length:rows},(_,row)=>Array.from({length:cols},(_,col)=>renderCell(row,col)))});};export default GameBoard;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","GameBoard","_ref","gameState","onCellClick","currentLevel","blockPositions","coveredCells","gridSize","obstacles","rows","cols","renderCell","row","col","position","positionKey","concat","isObstacle","some","obs","blockIndex","findIndex","block","isCovered","has","cellClass","className","onClick","children","style","gridTemplateColumns","gridTemplateRows","Array","from","length","_"],"sources":["/Users/arthurlin/Desktop/網服/wp1141/hw2/src/components/GameBoard.tsx"],"sourcesContent":["import React from 'react';\nimport { GameState, Position } from '../types/GameTypes';\nimport './GameBoard.css';\n\ninterface GameBoardProps {\n  gameState: GameState;\n  onCellClick?: (position: Position) => void;\n}\n\nconst GameBoard: React.FC<GameBoardProps> = ({ gameState, onCellClick }) => {\n  const { currentLevel, blockPositions, coveredCells } = gameState;\n  const { gridSize, obstacles } = currentLevel;\n  const [rows, cols] = gridSize;\n\n  const renderCell = (row: number, col: number) => {\n    const position: Position = { row, col };\n    const positionKey = `${row},${col}`;\n    \n    // 檢查是否為障礙物\n    const isObstacle = obstacles.some(obs => obs.row === row && obs.col === col);\n    \n    // 檢查是否有方塊\n    const blockIndex = blockPositions.findIndex(block => \n      block.row === row && block.col === col\n    );\n    \n    // 檢查是否已覆蓋\n    const isCovered = coveredCells.has(positionKey);\n    \n    let cellClass = 'game-cell';\n    if (isObstacle) {\n      cellClass += ' obstacle';\n    } else if (blockIndex !== -1) {\n      cellClass += ` block block-${blockIndex}`;\n    } else if (isCovered) {\n      cellClass += ' covered';\n    } else {\n      cellClass += ' empty';\n    }\n\n    return (\n      <div\n        key={`${row}-${col}`}\n        className={cellClass}\n        onClick={() => onCellClick?.(position)}\n        data-row={row}\n        data-col={col}\n      >\n        {blockIndex !== -1 && (\n          <div className=\"block-content\">\n            <span className=\"block-number\">{blockIndex + 1}</span>\n          </div>\n        )}\n        {isCovered && !isObstacle && blockIndex === -1 && (\n          <div className=\"covered-indicator\">✓</div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div \n      className=\"game-board\"\n      style={{\n        gridTemplateColumns: `repeat(${cols}, 1fr)`,\n        gridTemplateRows: `repeat(${rows}, 1fr)`\n      }}\n    >\n      {Array.from({ length: rows }, (_, row) =>\n        Array.from({ length: cols }, (_, col) => renderCell(row, col))\n      )}\n    </div>\n  );\n};\n\nexport default GameBoard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"/Users/arthurlin/Desktop/\\u7DB2\\u670D/wp1141/hw2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import'./CompletionEffects.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CompletionEffects=_ref=>{let{stars,isVisible,onComplete}=_ref;const[particles,setParticles]=useState([]);const[showText,setShowText]=useState(false);const createParticles=useCallback(starCount=>{const newParticles=[];const particleCount=starCount===1?30:starCount===2?60:100;for(let i=0;i<particleCount;i++){const colors=starCount===1?['#FFD700','#FFA500','#FF8C00']:starCount===2?['#FFD700','#FF6B6B','#4ECDC4','#45B7D1']:['#FFD700','#FF6B6B','#4ECDC4','#45B7D1','#96CEB4','#FFEAA7','#DDA0DD'];newParticles.push({id:i,x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:(Math.random()-0.5)*10,vy:(Math.random()-0.5)*10,color:colors[Math.floor(Math.random()*colors.length)],size:Math.random()*8+4,life:1,maxLife:1});}setParticles(newParticles);animateParticles(newParticles);},[]);useEffect(()=>{if(isVisible){setShowText(true);createParticles(stars);const timer=setTimeout(()=>{setShowText(false);setParticles([]);onComplete();},3000);return()=>clearTimeout(timer);}},[isVisible,stars,onComplete,createParticles]);const animateParticles=initialParticles=>{let animationId;let currentParticles=[...initialParticles];const animate=()=>{currentParticles=currentParticles.map(particle=>_objectSpread(_objectSpread({},particle),{},{x:particle.x+particle.vx,y:particle.y+particle.vy,vy:particle.vy+0.2,// 重力效果\nlife:particle.life-0.02})).filter(particle=>particle.life>0);setParticles([...currentParticles]);if(currentParticles.length>0){animationId=requestAnimationFrame(animate);}};animationId=requestAnimationFrame(animate);return()=>{if(animationId){cancelAnimationFrame(animationId);}};};const getCompletionText=()=>{switch(stars){case 1:return'完成！';case 2:return'很棒！';case 3:return'完美！';default:return'完成！';}};const getStarDisplay=()=>{return'★'.repeat(stars)+'☆'.repeat(3-stars);};if(!isVisible)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"completion-effects-overlay\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"particles-container\",children:particles.map(particle=>/*#__PURE__*/_jsx(\"div\",{className:\"particle\",style:{left:\"\".concat(particle.x,\"px\"),top:\"\".concat(particle.y,\"px\"),backgroundColor:particle.color,width:\"\".concat(particle.size,\"px\"),height:\"\".concat(particle.size,\"px\"),opacity:particle.life,boxShadow:\"0 0 \".concat(particle.size*2,\"px \").concat(particle.color)}},particle.id))}),showText&&/*#__PURE__*/_jsxs(\"div\",{className:\"completion-text stars-\".concat(stars),children:[/*#__PURE__*/_jsx(\"div\",{className:\"completion-title\",children:getCompletionText()}),/*#__PURE__*/_jsx(\"div\",{className:\"completion-stars\",children:getStarDisplay()}),/*#__PURE__*/_jsx(\"div\",{className:\"completion-sparkle\",children:\"\\u2728\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"completion-glow glow-\".concat(stars)})]});};export default CompletionEffects;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","CompletionEffects","_ref","stars","isVisible","onComplete","particles","setParticles","showText","setShowText","createParticles","useCallback","starCount","newParticles","particleCount","i","colors","push","id","x","Math","random","window","innerWidth","y","innerHeight","vx","vy","color","floor","length","size","life","maxLife","animateParticles","timer","setTimeout","clearTimeout","initialParticles","animationId","currentParticles","animate","map","particle","_objectSpread","filter","requestAnimationFrame","cancelAnimationFrame","getCompletionText","getStarDisplay","repeat","className","children","style","left","concat","top","backgroundColor","width","height","opacity","boxShadow"],"sources":["/Users/arthurlin/Desktop/網服/wp1141/hw2/src/components/CompletionEffects.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './CompletionEffects.css';\n\ninterface CompletionEffectsProps {\n  stars: number;\n  isVisible: boolean;\n  onComplete: () => void;\n}\n\ninterface Particle {\n  id: number;\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  color: string;\n  size: number;\n  life: number;\n  maxLife: number;\n}\n\nconst CompletionEffects: React.FC<CompletionEffectsProps> = ({ stars, isVisible, onComplete }) => {\n  const [particles, setParticles] = useState<Particle[]>([]);\n  const [showText, setShowText] = useState(false);\n\n  const createParticles = useCallback((starCount: number) => {\n    const newParticles: Particle[] = [];\n    const particleCount = starCount === 1 ? 30 : starCount === 2 ? 60 : 100;\n    \n    for (let i = 0; i < particleCount; i++) {\n      const colors = starCount === 1 \n        ? ['#FFD700', '#FFA500', '#FF8C00']\n        : starCount === 2 \n        ? ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1']\n        : ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD'];\n\n      newParticles.push({\n        id: i,\n        x: Math.random() * window.innerWidth,\n        y: Math.random() * window.innerHeight,\n        vx: (Math.random() - 0.5) * 10,\n        vy: (Math.random() - 0.5) * 10,\n        color: colors[Math.floor(Math.random() * colors.length)],\n        size: Math.random() * 8 + 4,\n        life: 1,\n        maxLife: 1\n      });\n    }\n\n    setParticles(newParticles);\n    animateParticles(newParticles);\n  }, []);\n\n  useEffect(() => {\n    if (isVisible) {\n      setShowText(true);\n      createParticles(stars);\n      \n      const timer = setTimeout(() => {\n        setShowText(false);\n        setParticles([]);\n        onComplete();\n      }, 3000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [isVisible, stars, onComplete, createParticles]);\n\n  const animateParticles = (initialParticles: Particle[]) => {\n    let animationId: number;\n    let currentParticles = [...initialParticles];\n\n    const animate = () => {\n      currentParticles = currentParticles.map(particle => ({\n        ...particle,\n        x: particle.x + particle.vx,\n        y: particle.y + particle.vy,\n        vy: particle.vy + 0.2, // 重力效果\n        life: particle.life - 0.02\n      })).filter(particle => particle.life > 0);\n\n      setParticles([...currentParticles]);\n\n      if (currentParticles.length > 0) {\n        animationId = requestAnimationFrame(animate);\n      }\n    };\n\n    animationId = requestAnimationFrame(animate);\n\n    return () => {\n      if (animationId) {\n        cancelAnimationFrame(animationId);\n      }\n    };\n  };\n\n  const getCompletionText = () => {\n    switch (stars) {\n      case 1:\n        return '完成！';\n      case 2:\n        return '很棒！';\n      case 3:\n        return '完美！';\n      default:\n        return '完成！';\n    }\n  };\n\n  const getStarDisplay = () => {\n    return '★'.repeat(stars) + '☆'.repeat(3 - stars);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"completion-effects-overlay\">\n      {/* 粒子效果 */}\n      <div className=\"particles-container\">\n        {particles.map(particle => (\n          <div\n            key={particle.id}\n            className=\"particle\"\n            style={{\n              left: `${particle.x}px`,\n              top: `${particle.y}px`,\n              backgroundColor: particle.color,\n              width: `${particle.size}px`,\n              height: `${particle.size}px`,\n              opacity: particle.life,\n              boxShadow: `0 0 ${particle.size * 2}px ${particle.color}`\n            }}\n          />\n        ))}\n      </div>\n\n      {/* 完成文字 */}\n      {showText && (\n        <div className={`completion-text stars-${stars}`}>\n          <div className=\"completion-title\">{getCompletionText()}</div>\n          <div className=\"completion-stars\">{getStarDisplay()}</div>\n          <div className=\"completion-sparkle\">✨</div>\n        </div>\n      )}\n\n      {/* 背景光效 */}\n      <div className={`completion-glow glow-${stars}`}></div>\n    </div>\n  );\n};\n\nexport default CompletionEffects;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
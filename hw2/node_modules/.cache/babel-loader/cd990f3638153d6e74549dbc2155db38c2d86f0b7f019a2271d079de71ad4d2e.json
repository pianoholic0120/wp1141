{"ast":null,"code":"var _jsxFileName = \"/Users/arthurlin/Desktop/\\u7DB2\\u670D/wp1141/hw2/src/components/GameBoard.tsx\";\nimport React from 'react';\nimport './GameBoard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameBoard = ({\n  gameState,\n  onCellClick\n}) => {\n  const {\n    currentLevel,\n    blockPositions,\n    coveredCells\n  } = gameState;\n  const {\n    gridSize,\n    obstacles\n  } = currentLevel;\n  const [rows, cols] = gridSize;\n\n  // 調試信息\n  console.log('GameBoard render:', {\n    gridSize,\n    obstacles: obstacles.length,\n    blockPositions: blockPositions.length,\n    coveredCells: coveredCells.size,\n    blockPositions_data: blockPositions,\n    obstacles_data: obstacles\n  });\n  const renderCell = (row, col) => {\n    const position = {\n      row,\n      col\n    };\n    const positionKey = `${row},${col}`;\n\n    // 檢查是否為障礙物\n    const isObstacle = obstacles.some(obs => obs.row === row && obs.col === col);\n\n    // 檢查是否有方塊\n    const blockIndex = blockPositions.findIndex(block => block.row === row && block.col === col);\n\n    // 檢查是否已覆蓋\n    const isCovered = coveredCells.has(positionKey);\n    let cellClass = 'game-cell';\n    if (isObstacle) {\n      cellClass += ' obstacle';\n    } else if (blockIndex !== -1) {\n      cellClass += ` block block-${blockIndex}`;\n    } else if (isCovered) {\n      cellClass += ' covered';\n    } else {\n      cellClass += ' empty';\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cellClass,\n      onClick: () => onCellClick === null || onCellClick === void 0 ? void 0 : onCellClick(position),\n      \"data-row\": row,\n      \"data-col\": col,\n      children: blockIndex !== -1 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"block-number\",\n        children: blockIndex + 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)\n    }, `${row}-${col}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game-board\",\n    style: {\n      gridTemplateColumns: `repeat(${cols}, 1fr)`,\n      gridTemplateRows: `repeat(${rows}, 1fr)`\n    },\n    children: Array.from({\n      length: rows\n    }, (_, row) => Array.from({\n      length: cols\n    }, (_, col) => renderCell(row, col)))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_c = GameBoard;\nexport default GameBoard;\nvar _c;\n$RefreshReg$(_c, \"GameBoard\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","GameBoard","gameState","onCellClick","currentLevel","blockPositions","coveredCells","gridSize","obstacles","rows","cols","console","log","length","size","blockPositions_data","obstacles_data","renderCell","row","col","position","positionKey","isObstacle","some","obs","blockIndex","findIndex","block","isCovered","has","cellClass","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","style","gridTemplateColumns","gridTemplateRows","Array","from","_","_c","$RefreshReg$"],"sources":["/Users/arthurlin/Desktop/網服/wp1141/hw2/src/components/GameBoard.tsx"],"sourcesContent":["import React from 'react';\nimport { GameState, Position } from '../types/GameTypes';\nimport './GameBoard.css';\n\ninterface GameBoardProps {\n  gameState: GameState;\n  onCellClick?: (position: Position) => void;\n}\n\nconst GameBoard: React.FC<GameBoardProps> = ({ gameState, onCellClick }) => {\n  const { currentLevel, blockPositions, coveredCells } = gameState;\n  const { gridSize, obstacles } = currentLevel;\n  const [rows, cols] = gridSize;\n\n  // 調試信息\n  console.log('GameBoard render:', {\n    gridSize,\n    obstacles: obstacles.length,\n    blockPositions: blockPositions.length,\n    coveredCells: coveredCells.size,\n    blockPositions_data: blockPositions,\n    obstacles_data: obstacles\n  });\n\n  const renderCell = (row: number, col: number) => {\n    const position: Position = { row, col };\n    const positionKey = `${row},${col}`;\n    \n    // 檢查是否為障礙物\n    const isObstacle = obstacles.some(obs => obs.row === row && obs.col === col);\n    \n    // 檢查是否有方塊\n    const blockIndex = blockPositions.findIndex(block => \n      block.row === row && block.col === col\n    );\n    \n    // 檢查是否已覆蓋\n    const isCovered = coveredCells.has(positionKey);\n    \n    let cellClass = 'game-cell';\n    if (isObstacle) {\n      cellClass += ' obstacle';\n    } else if (blockIndex !== -1) {\n      cellClass += ` block block-${blockIndex}`;\n    } else if (isCovered) {\n      cellClass += ' covered';\n    } else {\n      cellClass += ' empty';\n    }\n\n    return (\n      <div\n        key={`${row}-${col}`}\n        className={cellClass}\n        onClick={() => onCellClick?.(position)}\n        data-row={row}\n        data-col={col}\n      >\n        {blockIndex !== -1 && (\n          <span className=\"block-number\">{blockIndex + 1}</span>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div \n      className=\"game-board\"\n      style={{\n        gridTemplateColumns: `repeat(${cols}, 1fr)`,\n        gridTemplateRows: `repeat(${rows}, 1fr)`\n      }}\n    >\n      {Array.from({ length: rows }, (_, row) =>\n        Array.from({ length: cols }, (_, col) => renderCell(row, col))\n      )}\n    </div>\n  );\n};\n\nexport default GameBoard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
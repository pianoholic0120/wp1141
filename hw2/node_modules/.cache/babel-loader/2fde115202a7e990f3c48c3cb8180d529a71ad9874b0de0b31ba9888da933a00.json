{"ast":null,"code":"var _AudioManager;\nclass AudioManager {\n  constructor() {\n    this.audioContext = null;\n    this.isEnabled = true;\n    this.backgroundVolume = 0.3;\n    // 背景音樂音量\n    this.effectVolume = 0.5;\n    // 音效音量\n    this.backgroundMusicInterval = null;\n    this.bgNextNoteTime = null;\n    // 下個音符的絕對時間（AudioContext 時間）\n    this.bgNoteIndex = 0;\n    this.masterGainNode = null;\n    this.initializeAudio();\n  }\n  static getInstance() {\n    if (!AudioManager.instance) {\n      AudioManager.instance = new AudioManager();\n    }\n    return AudioManager.instance;\n  }\n  async initializeAudio() {\n    try {\n      this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\n      // 創建主音量控制節點\n      this.masterGainNode = this.audioContext.createGain();\n      this.masterGainNode.connect(this.audioContext.destination);\n      this.masterGainNode.gain.setValueAtTime(0.8, this.audioContext.currentTime);\n\n      // 等待用戶互動後恢復音頻上下文並啟動背景音樂\n      if (this.audioContext.state === 'suspended') {\n        const resumeAudio = () => {\n          var _this$audioContext;\n          (_this$audioContext = this.audioContext) === null || _this$audioContext === void 0 ? void 0 : _this$audioContext.resume().then(() => {\n            // 音頻上下文恢復後自動啟動背景音樂\n            if (this.isEnabled) {\n              this.playSimpleBackgroundMusic();\n            }\n          });\n          document.removeEventListener('click', resumeAudio);\n          document.removeEventListener('keydown', resumeAudio);\n        };\n        document.addEventListener('click', resumeAudio);\n        document.addEventListener('keydown', resumeAudio);\n      } else {\n        // 如果音頻上下文已經可用，立即啟動背景音樂\n        this.playSimpleBackgroundMusic();\n      }\n    } catch (error) {\n      console.warn('Web Audio API not supported:', error);\n    }\n  }\n  createSoundEffects() {\n    // 音效將在播放時動態創建，避免預加載問題\n  }\n  playSimpleBackgroundMusic() {\n    if (!this.audioContext || !this.isEnabled || !this.masterGainNode) return;\n\n    // 清除之前的間隔\n    if (this.backgroundMusicInterval) {\n      clearInterval(this.backgroundMusicInterval);\n    }\n\n    // 簡化的背景音樂 - 使用預排程，避免被阻塞 API 影響\n    const scheduleNote = (frequency, startTime, duration, volume = 0.05) => {\n      if (!this.audioContext || !this.masterGainNode || !this.isEnabled) return;\n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(this.masterGainNode);\n      oscillator.frequency.setValueAtTime(frequency, startTime);\n      oscillator.type = 'sine';\n\n      // 平滑的音量控制\n      gainNode.gain.setValueAtTime(0, startTime);\n      gainNode.gain.linearRampToValueAtTime(volume * this.backgroundVolume * 0.8, startTime + 0.1);\n      gainNode.gain.linearRampToValueAtTime(volume * this.backgroundVolume * 0.6, startTime + duration - 0.1);\n      gainNode.gain.linearRampToValueAtTime(0, startTime + duration);\n      oscillator.start(startTime);\n      oscillator.stop(startTime + duration);\n    };\n\n    // 簡單的音符序列\n    const notes = [523, 659, 784, 659]; // C-E-G-E\n    this.bgNoteIndex = 0;\n    const noteGap = 2.0; // 兩秒一個音符\n    const noteDur = 0.9; // 持續時間 0.9s\n\n    // 設定下一個音符起始時間（使用 AudioContext 時間）\n    this.bgNextNoteTime = this.audioContext.currentTime + 0.05;\n\n    // 以固定節拍預先排程未來的 2-3 個音符，確保在同步彈窗期間不會中斷\n    const scheduler = () => {\n      if (!this.audioContext || !this.isEnabled || this.bgNextNoteTime === null) return;\n      const lookAhead = 0.2; // 每次排程時往前看 0.2s\n      const scheduleAheadTime = 1.0; // 預先排程 1s 內的音符\n      const now = this.audioContext.currentTime + lookAhead;\n      while (this.bgNextNoteTime < now + scheduleAheadTime) {\n        const freq = notes[this.bgNoteIndex];\n        scheduleNote(freq, this.bgNextNoteTime, noteDur);\n        this.bgNextNoteTime += noteGap;\n        this.bgNoteIndex = (this.bgNoteIndex + 1) % notes.length;\n      }\n    };\n    scheduler();\n    this.backgroundMusicInterval = window.setInterval(scheduler, 100); // 100ms 排程一次\n  }\n\n  // 公共方法\n  setEnabled(enabled) {\n    this.isEnabled = enabled;\n    if (!enabled) {\n      this.stopBackgroundMusic();\n    } else if (enabled) {\n      this.playBackgroundMusic();\n    }\n  }\n  isAudioEnabled() {\n    return this.isEnabled;\n  }\n  playBackgroundMusic() {\n    if (!this.isEnabled || !this.audioContext) return;\n\n    // 確保音頻上下文已恢復\n    if (this.audioContext.state === 'suspended') {\n      this.audioContext.resume().then(() => {\n        this.playSimpleBackgroundMusic();\n      });\n    } else {\n      this.playSimpleBackgroundMusic();\n    }\n  }\n  stopBackgroundMusic() {\n    if (this.backgroundMusicInterval) {\n      clearInterval(this.backgroundMusicInterval);\n      this.backgroundMusicInterval = null;\n    }\n  }\n  playSound(soundName) {\n    if (!this.isEnabled || !this.audioContext || !this.masterGainNode) return;\n\n    // 確保音頻上下文已恢復\n    if (this.audioContext.state === 'suspended') {\n      this.audioContext.resume().then(() => {\n        this.playProgrammaticSound(soundName);\n      });\n    } else {\n      this.playProgrammaticSound(soundName);\n    }\n  }\n  playProgrammaticSound(soundName) {\n    if (!this.audioContext || !this.masterGainNode) return;\n    const soundMap = {\n      'move': {\n        frequencies: [523],\n        duration: 0.15\n      },\n      // 簡化移動音效\n      'success': {\n        frequencies: [523, 659, 784],\n        duration: 0.4\n      },\n      // 簡化成功音效\n      'error': {\n        frequencies: [330],\n        duration: 0.3\n      },\n      // 簡化錯誤音效\n      'click': {\n        frequencies: [800],\n        duration: 0.1\n      },\n      // 簡化點擊音效\n      'star1': {\n        frequencies: [523, 659],\n        duration: 0.5\n      },\n      'star2': {\n        frequencies: [523, 659, 784],\n        duration: 0.7\n      },\n      'star3': {\n        frequencies: [523, 659, 784, 988],\n        duration: 0.9\n      },\n      'allComplete': {\n        frequencies: [523, 659, 784, 988, 1175],\n        duration: 1.2\n      }\n    };\n    const sound = soundMap[soundName];\n    if (!sound) return;\n    const now = this.audioContext.currentTime;\n    sound.frequencies.forEach((freq, index) => {\n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n      oscillator.connect(gainNode);\n      gainNode.connect(this.masterGainNode);\n      oscillator.frequency.setValueAtTime(freq, now);\n      oscillator.type = 'sine';\n      const delay = index * 0.15;\n      const amplitude = this.effectVolume * 0.3;\n      gainNode.gain.setValueAtTime(0, now + delay);\n      gainNode.gain.linearRampToValueAtTime(amplitude, now + delay + 0.05);\n      gainNode.gain.linearRampToValueAtTime(0, now + delay + 0.4);\n      oscillator.start(now + delay);\n      oscillator.stop(now + delay + 0.4);\n    });\n  }\n  setBackgroundVolume(volume) {\n    this.backgroundVolume = Math.max(0, Math.min(0.2, volume)); // 限制最大音量\n  }\n  setEffectVolume(volume) {\n    this.effectVolume = Math.max(0, Math.min(0.5, volume)); // 限制最大音量\n  }\n}\n_AudioManager = AudioManager;\nAudioManager.instance = void 0;\nexport default AudioManager;","map":{"version":3,"names":["AudioManager","constructor","audioContext","isEnabled","backgroundVolume","effectVolume","backgroundMusicInterval","bgNextNoteTime","bgNoteIndex","masterGainNode","initializeAudio","getInstance","instance","window","AudioContext","webkitAudioContext","createGain","connect","destination","gain","setValueAtTime","currentTime","state","resumeAudio","_this$audioContext","resume","then","playSimpleBackgroundMusic","document","removeEventListener","addEventListener","error","console","warn","createSoundEffects","clearInterval","scheduleNote","frequency","startTime","duration","volume","oscillator","createOscillator","gainNode","type","linearRampToValueAtTime","start","stop","notes","noteGap","noteDur","scheduler","lookAhead","scheduleAheadTime","now","freq","length","setInterval","setEnabled","enabled","stopBackgroundMusic","playBackgroundMusic","isAudioEnabled","playSound","soundName","playProgrammaticSound","soundMap","frequencies","sound","forEach","index","delay","amplitude","setBackgroundVolume","Math","max","min","setEffectVolume","_AudioManager"],"sources":["/Users/arthurlin/Desktop/網服/wp1141/hw2/src/utils/AudioManager.ts"],"sourcesContent":["class AudioManager {\n  private static instance: AudioManager;\n  private audioContext: AudioContext | null = null;\n  private isEnabled: boolean = true;\n  private backgroundVolume: number = 0.3; // 背景音樂音量\n  private effectVolume: number = 0.5; // 音效音量\n  private backgroundMusicInterval: number | null = null;\n  private bgNextNoteTime: number | null = null; // 下個音符的絕對時間（AudioContext 時間）\n  private bgNoteIndex: number = 0;\n  private masterGainNode: GainNode | null = null;\n\n  private constructor() {\n    this.initializeAudio();\n  }\n\n  public static getInstance(): AudioManager {\n    if (!AudioManager.instance) {\n      AudioManager.instance = new AudioManager();\n    }\n    return AudioManager.instance;\n  }\n\n  private async initializeAudio() {\n    try {\n      this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n      \n      // 創建主音量控制節點\n      this.masterGainNode = this.audioContext.createGain();\n      this.masterGainNode.connect(this.audioContext.destination);\n      this.masterGainNode.gain.setValueAtTime(0.8, this.audioContext.currentTime);\n      \n      // 等待用戶互動後恢復音頻上下文並啟動背景音樂\n      if (this.audioContext.state === 'suspended') {\n        const resumeAudio = () => {\n          this.audioContext?.resume().then(() => {\n            // 音頻上下文恢復後自動啟動背景音樂\n            if (this.isEnabled) {\n              this.playSimpleBackgroundMusic();\n            }\n          });\n          document.removeEventListener('click', resumeAudio);\n          document.removeEventListener('keydown', resumeAudio);\n        };\n        document.addEventListener('click', resumeAudio);\n        document.addEventListener('keydown', resumeAudio);\n      } else {\n        // 如果音頻上下文已經可用，立即啟動背景音樂\n        this.playSimpleBackgroundMusic();\n      }\n    } catch (error) {\n      console.warn('Web Audio API not supported:', error);\n    }\n  }\n\n  private createSoundEffects() {\n    // 音效將在播放時動態創建，避免預加載問題\n  }\n\n  private playSimpleBackgroundMusic() {\n    if (!this.audioContext || !this.isEnabled || !this.masterGainNode) return;\n\n    // 清除之前的間隔\n    if (this.backgroundMusicInterval) {\n      clearInterval(this.backgroundMusicInterval);\n    }\n\n    // 簡化的背景音樂 - 使用預排程，避免被阻塞 API 影響\n    const scheduleNote = (frequency: number, startTime: number, duration: number, volume: number = 0.05) => {\n      if (!this.audioContext || !this.masterGainNode || !this.isEnabled) return;\n\n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(this.masterGainNode);\n      \n      oscillator.frequency.setValueAtTime(frequency, startTime);\n      oscillator.type = 'sine';\n      \n      // 平滑的音量控制\n      gainNode.gain.setValueAtTime(0, startTime);\n      gainNode.gain.linearRampToValueAtTime(volume * this.backgroundVolume * 0.8, startTime + 0.1);\n      gainNode.gain.linearRampToValueAtTime(volume * this.backgroundVolume * 0.6, startTime + duration - 0.1);\n      gainNode.gain.linearRampToValueAtTime(0, startTime + duration);\n      \n      oscillator.start(startTime);\n      oscillator.stop(startTime + duration);\n    };\n\n    // 簡單的音符序列\n    const notes = [523, 659, 784, 659]; // C-E-G-E\n    this.bgNoteIndex = 0;\n    const noteGap = 2.0; // 兩秒一個音符\n    const noteDur = 0.9; // 持續時間 0.9s\n\n    // 設定下一個音符起始時間（使用 AudioContext 時間）\n    this.bgNextNoteTime = this.audioContext.currentTime + 0.05;\n\n    // 以固定節拍預先排程未來的 2-3 個音符，確保在同步彈窗期間不會中斷\n    const scheduler = () => {\n      if (!this.audioContext || !this.isEnabled || this.bgNextNoteTime === null) return;\n      const lookAhead = 0.2; // 每次排程時往前看 0.2s\n      const scheduleAheadTime = 1.0; // 預先排程 1s 內的音符\n      const now = this.audioContext.currentTime + lookAhead;\n\n      while (this.bgNextNoteTime < now + scheduleAheadTime) {\n        const freq = notes[this.bgNoteIndex];\n        scheduleNote(freq, this.bgNextNoteTime, noteDur);\n        this.bgNextNoteTime += noteGap;\n        this.bgNoteIndex = (this.bgNoteIndex + 1) % notes.length;\n      }\n    };\n\n    scheduler();\n    this.backgroundMusicInterval = window.setInterval(scheduler, 100); // 100ms 排程一次\n  }\n\n  // 公共方法\n  public setEnabled(enabled: boolean) {\n    this.isEnabled = enabled;\n    if (!enabled) {\n      this.stopBackgroundMusic();\n    } else if (enabled) {\n      this.playBackgroundMusic();\n    }\n  }\n\n  public isAudioEnabled(): boolean {\n    return this.isEnabled;\n  }\n\n  public playBackgroundMusic() {\n    if (!this.isEnabled || !this.audioContext) return;\n    \n    // 確保音頻上下文已恢復\n    if (this.audioContext.state === 'suspended') {\n      this.audioContext.resume().then(() => {\n        this.playSimpleBackgroundMusic();\n      });\n    } else {\n      this.playSimpleBackgroundMusic();\n    }\n  }\n\n  public stopBackgroundMusic() {\n    if (this.backgroundMusicInterval) {\n      clearInterval(this.backgroundMusicInterval);\n      this.backgroundMusicInterval = null;\n    }\n  }\n\n  public playSound(soundName: string) {\n    if (!this.isEnabled || !this.audioContext || !this.masterGainNode) return;\n    \n    // 確保音頻上下文已恢復\n    if (this.audioContext.state === 'suspended') {\n      this.audioContext.resume().then(() => {\n        this.playProgrammaticSound(soundName);\n      });\n    } else {\n      this.playProgrammaticSound(soundName);\n    }\n  }\n\n  private playProgrammaticSound(soundName: string) {\n    if (!this.audioContext || !this.masterGainNode) return;\n\n    const soundMap: { [key: string]: { frequencies: number[], duration: number } } = {\n      'move': { frequencies: [523], duration: 0.15 }, // 簡化移動音效\n      'success': { frequencies: [523, 659, 784], duration: 0.4 }, // 簡化成功音效\n      'error': { frequencies: [330], duration: 0.3 }, // 簡化錯誤音效\n      'click': { frequencies: [800], duration: 0.1 }, // 簡化點擊音效\n      'star1': { frequencies: [523, 659], duration: 0.5 },\n      'star2': { frequencies: [523, 659, 784], duration: 0.7 },\n      'star3': { frequencies: [523, 659, 784, 988], duration: 0.9 },\n      'allComplete': { frequencies: [523, 659, 784, 988, 1175], duration: 1.2 }\n    };\n\n    const sound = soundMap[soundName];\n    if (!sound) return;\n\n    const now = this.audioContext.currentTime;\n    \n    sound.frequencies.forEach((freq, index) => {\n      const oscillator = this.audioContext!.createOscillator();\n      const gainNode = this.audioContext!.createGain();\n      \n      oscillator.connect(gainNode);\n      gainNode.connect(this.masterGainNode!);\n      \n      oscillator.frequency.setValueAtTime(freq, now);\n      oscillator.type = 'sine';\n      \n      const delay = index * 0.15;\n      const amplitude = this.effectVolume * 0.3;\n\n      gainNode.gain.setValueAtTime(0, now + delay);\n      gainNode.gain.linearRampToValueAtTime(amplitude, now + delay + 0.05);\n      gainNode.gain.linearRampToValueAtTime(0, now + delay + 0.4);\n      \n      oscillator.start(now + delay);\n      oscillator.stop(now + delay + 0.4);\n    });\n  }\n\n  public setBackgroundVolume(volume: number) {\n    this.backgroundVolume = Math.max(0, Math.min(0.2, volume)); // 限制最大音量\n  }\n\n  public setEffectVolume(volume: number) {\n    this.effectVolume = Math.max(0, Math.min(0.5, volume)); // 限制最大音量\n  }\n}\n\nexport default AudioManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
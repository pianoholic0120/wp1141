{"ast":null,"code":"var _jsxFileName = \"/Users/arthurlin/Desktop/\\u7DB2\\u670D/wp1141/hw2/src/components/CompletionEffects.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport './CompletionEffects.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CompletionEffects = ({\n  stars,\n  isVisible,\n  onComplete\n}) => {\n  _s();\n  const [particles, setParticles] = useState([]);\n  const [showText, setShowText] = useState(false);\n  const createParticles = useCallback(starCount => {\n    const newParticles = [];\n    const particleCount = starCount === 1 ? 30 : starCount === 2 ? 60 : 100;\n    for (let i = 0; i < particleCount; i++) {\n      const colors = starCount === 1 ? ['#FFD700', '#FFA500', '#FF8C00'] : starCount === 2 ? ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1'] : ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD'];\n      newParticles.push({\n        id: i,\n        x: Math.random() * window.innerWidth,\n        y: Math.random() * window.innerHeight,\n        vx: (Math.random() - 0.5) * 10,\n        vy: (Math.random() - 0.5) * 10,\n        color: colors[Math.floor(Math.random() * colors.length)],\n        size: Math.random() * 8 + 4,\n        life: 1,\n        maxLife: 1\n      });\n    }\n    setParticles(newParticles);\n    animateParticles(newParticles);\n  }, []);\n  useEffect(() => {\n    if (isVisible) {\n      setShowText(true);\n      createParticles(stars);\n      const timer = setTimeout(() => {\n        setShowText(false);\n        setParticles([]);\n        onComplete();\n      }, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [isVisible, stars, onComplete, createParticles]);\n  const animateParticles = initialParticles => {\n    let animationId;\n    let currentParticles = [...initialParticles];\n    const animate = () => {\n      currentParticles = currentParticles.map(particle => ({\n        ...particle,\n        x: particle.x + particle.vx,\n        y: particle.y + particle.vy,\n        vy: particle.vy + 0.2,\n        // 重力效果\n        life: particle.life - 0.02\n      })).filter(particle => particle.life > 0);\n      setParticles([...currentParticles]);\n      if (currentParticles.length > 0) {\n        animationId = requestAnimationFrame(animate);\n      }\n    };\n    animationId = requestAnimationFrame(animate);\n    return () => {\n      if (animationId) {\n        cancelAnimationFrame(animationId);\n      }\n    };\n  };\n  const getCompletionText = () => {\n    switch (stars) {\n      case 1:\n        return '完成！';\n      case 2:\n        return '很棒！';\n      case 3:\n        return '完美！';\n      default:\n        return '完成！';\n    }\n  };\n  const getStarDisplay = () => {\n    return '★'.repeat(stars) + '☆'.repeat(3 - stars);\n  };\n  if (!isVisible) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"completion-effects-overlay\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"particles-container\",\n      children: particles.map(particle => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"particle\",\n        style: {\n          left: `${particle.x}px`,\n          top: `${particle.y}px`,\n          backgroundColor: particle.color,\n          width: `${particle.size}px`,\n          height: `${particle.size}px`,\n          opacity: particle.life,\n          boxShadow: `0 0 ${particle.size * 2}px ${particle.color}`\n        }\n      }, particle.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), showText && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `completion-text stars-${stars}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completion-title\",\n        children: getCompletionText()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completion-stars\",\n        children: getStarDisplay()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"completion-sparkle\",\n        children: \"\\u2728\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `completion-glow glow-${stars}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n_s(CompletionEffects, \"ZsolK/PIWIxEpsctlbLpIAR4Pe0=\");\n_c = CompletionEffects;\nexport default CompletionEffects;\nvar _c;\n$RefreshReg$(_c, \"CompletionEffects\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","jsxDEV","_jsxDEV","CompletionEffects","stars","isVisible","onComplete","_s","particles","setParticles","showText","setShowText","createParticles","starCount","newParticles","particleCount","i","colors","push","id","x","Math","random","window","innerWidth","y","innerHeight","vx","vy","color","floor","length","size","life","maxLife","animateParticles","timer","setTimeout","clearTimeout","initialParticles","animationId","currentParticles","animate","map","particle","filter","requestAnimationFrame","cancelAnimationFrame","getCompletionText","getStarDisplay","repeat","className","children","style","left","top","backgroundColor","width","height","opacity","boxShadow","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/arthurlin/Desktop/網服/wp1141/hw2/src/components/CompletionEffects.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport './CompletionEffects.css';\n\ninterface CompletionEffectsProps {\n  stars: number;\n  isVisible: boolean;\n  onComplete: () => void;\n}\n\ninterface Particle {\n  id: number;\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  color: string;\n  size: number;\n  life: number;\n  maxLife: number;\n}\n\nconst CompletionEffects: React.FC<CompletionEffectsProps> = ({ stars, isVisible, onComplete }) => {\n  const [particles, setParticles] = useState<Particle[]>([]);\n  const [showText, setShowText] = useState(false);\n\n  const createParticles = useCallback((starCount: number) => {\n    const newParticles: Particle[] = [];\n    const particleCount = starCount === 1 ? 30 : starCount === 2 ? 60 : 100;\n    \n    for (let i = 0; i < particleCount; i++) {\n      const colors = starCount === 1 \n        ? ['#FFD700', '#FFA500', '#FF8C00']\n        : starCount === 2 \n        ? ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1']\n        : ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD'];\n\n      newParticles.push({\n        id: i,\n        x: Math.random() * window.innerWidth,\n        y: Math.random() * window.innerHeight,\n        vx: (Math.random() - 0.5) * 10,\n        vy: (Math.random() - 0.5) * 10,\n        color: colors[Math.floor(Math.random() * colors.length)],\n        size: Math.random() * 8 + 4,\n        life: 1,\n        maxLife: 1\n      });\n    }\n\n    setParticles(newParticles);\n    animateParticles(newParticles);\n  }, []);\n\n  useEffect(() => {\n    if (isVisible) {\n      setShowText(true);\n      createParticles(stars);\n      \n      const timer = setTimeout(() => {\n        setShowText(false);\n        setParticles([]);\n        onComplete();\n      }, 3000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [isVisible, stars, onComplete, createParticles]);\n\n  const animateParticles = (initialParticles: Particle[]) => {\n    let animationId: number;\n    let currentParticles = [...initialParticles];\n\n    const animate = () => {\n      currentParticles = currentParticles.map(particle => ({\n        ...particle,\n        x: particle.x + particle.vx,\n        y: particle.y + particle.vy,\n        vy: particle.vy + 0.2, // 重力效果\n        life: particle.life - 0.02\n      })).filter(particle => particle.life > 0);\n\n      setParticles([...currentParticles]);\n\n      if (currentParticles.length > 0) {\n        animationId = requestAnimationFrame(animate);\n      }\n    };\n\n    animationId = requestAnimationFrame(animate);\n\n    return () => {\n      if (animationId) {\n        cancelAnimationFrame(animationId);\n      }\n    };\n  };\n\n  const getCompletionText = () => {\n    switch (stars) {\n      case 1:\n        return '完成！';\n      case 2:\n        return '很棒！';\n      case 3:\n        return '完美！';\n      default:\n        return '完成！';\n    }\n  };\n\n  const getStarDisplay = () => {\n    return '★'.repeat(stars) + '☆'.repeat(3 - stars);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"completion-effects-overlay\">\n      {/* 粒子效果 */}\n      <div className=\"particles-container\">\n        {particles.map(particle => (\n          <div\n            key={particle.id}\n            className=\"particle\"\n            style={{\n              left: `${particle.x}px`,\n              top: `${particle.y}px`,\n              backgroundColor: particle.color,\n              width: `${particle.size}px`,\n              height: `${particle.size}px`,\n              opacity: particle.life,\n              boxShadow: `0 0 ${particle.size * 2}px ${particle.color}`\n            }}\n          />\n        ))}\n      </div>\n\n      {/* 完成文字 */}\n      {showText && (\n        <div className={`completion-text stars-${stars}`}>\n          <div className=\"completion-title\">{getCompletionText()}</div>\n          <div className=\"completion-stars\">{getStarDisplay()}</div>\n          <div className=\"completion-sparkle\">✨</div>\n        </div>\n      )}\n\n      {/* 背景光效 */}\n      <div className={`completion-glow glow-${stars}`}></div>\n    </div>\n  );\n};\n\nexport default CompletionEffects;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}